<div class="product-list-container">
  <!-- Background Decoration -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>

  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-content">
        <div class="header-icon">
          <i class="bi bi-grid-3x3-gap"></i>
        </div>
        <h1 class="page-title">Discover Amazing Products</h1>
        <p class="page-subtitle">Explore our curated collection of premium products with exclusive deals</p>
      </div>
    </div>

    <!-- Category Filter -->
    <div class="category-filter-section">
      <div class="filter-header">
        <h3>Categories</h3>
        <div class="filter-count">
          <span class="count-badge">{{ products.length }} products</span>
        </div>
      </div>

      <div class="category-filters">
        <button
          *ngFor="let category of categories"
          type="button"
          class="category-filter-btn"
          [class.active]="selectedCategory === category"
          (click)="filterByCategory(category)"
        >
          <span class="filter-text">{{ category }}</span>
          <div class="filter-indicator"></div>
        </button>
      </div>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="loading-section">
      <div class="loading-spinner">
        <div class="spinner-circle"></div>
        <div class="spinner-text">Loading amazing products...</div>
      </div>
    </div>

    <!-- Products Grid -->
    <div *ngIf="!isLoading" class="products-grid">
      <div class="product-card" *ngFor="let product of products" @staggerSlideIn>
        <div class="card-inner">
          <!-- Product Image -->
          <div class="product-image-section">
            <img
              [src]="product.image"
              [alt]="product.name"
              class="product-image"
              (load)="onImageLoad($event)"
              (error)="onImageError($event)"
            />
            <div class="product-overlay">
              <button
                class="quick-view-btn"
                (click)="quickView(product)"
              >
                <i class="bi bi-eye"></i>
                Quick View
              </button>
            </div>

            <!-- Stock Badge -->
            <div class="stock-badge" [class.low-stock]="product.stock < 10" [class.out-of-stock]="product.stock === 0">
              <span *ngIf="product.stock === 0">Out of Stock</span>
              <span *ngIf="product.stock > 0 && product.stock < 10">Only {{ product.stock }} left</span>
              <span *ngIf="product.stock >= 10">In Stock</span>
            </div>

            <!-- Category Tag -->
            <div class="category-tag">
              {{ product.category }}
            </div>
          </div>

          <!-- Product Info -->
          <div class="product-info">
            <h3 class="product-name">{{ product.name }}</h3>
            <p class="product-description">{{ product.description }}</p>

            <div class="product-meta">
              <div class="price-section">
                <span class="current-price">${{ product.price }}</span>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button
                class="add-to-cart-btn"
                [class.disabled]="product.stock === 0"
                [class.loading]="addingToCart === product.id"
                (click)="addToCart(product)"
                [disabled]="product.stock === 0 || addingToCart === product.id"
              >
                <span class="btn-content">
                  <i class="bi" [class.bi-cart-plus]="!addingToCart" [class.bi-arrow-repeat]="addingToCart === product.id"></i>
                  <span class="btn-text">
                    {{ product.stock === 0 ? 'Out of Stock' : (addingToCart === product.id ? 'Adding...' : 'Add to Cart') }}
                  </span>
                </span>
                <span class="btn-loader" *ngIf="addingToCart === product.id"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- No Products Found -->
    <div *ngIf="!isLoading && products.length === 0" class="empty-state">
      <div class="empty-icon">
        <i class="bi bi-search"></i>
      </div>
      <h3 class="empty-title">No Products Found</h3>
      <p class="empty-description">
        We couldn't find any products in the "{{ selectedCategory }}" category.
      </p>
      <button class="reset-filter-btn" (click)="filterByCategory('All')">
        Show All Products
      </button>
    </div>

    <!-- Load More Button (for future pagination) -->
    <div *ngIf="!isLoading && products.length > 0" class="load-more-section">
      <button class="load-more-btn">
        <i class="bi bi-arrow-clockwise"></i>
        Load More Products
      </button>
    </div>
  </div>
</div>
